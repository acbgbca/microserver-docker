n8n:
  envFile:
    N8N_EDITOR_BASE_URL: 'n8n.{{ internalDomain }}'
    N8N_HOST: 'n8n.{{ internalDomain }}'
    NODE_ENV: production
    WEBHOOK_URL: 'https://n8n.{{ internalDomain }}/'
    GENERIC_TIMEZONE: '{{ timezone }}'
    TZ: '{{ timezone }}'
    N8N_SMTP_HOST: '{{ smtp.host }}'
    N8N_SMTP_PORT: '{{ smtp.port }}'
    N8N_SMTP_SENDER: 'n8n@{{ externalDomain }}'
  services:
  - name: n8n
    image: ghcr.io/n8n-io/n8n:1.117.0@sha256:7b0d7d7499b2d0a472364b772267f9807a6c445753537435c51eb7736399a3b4
    envFile: true
    exposed:
      internal: true
      external: true
      port: 5678
    volumes:
      - local: data
        container: /home/node/.n8n
