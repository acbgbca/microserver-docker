---
version: "2.4"
services:
  jellyfin:
    image: 'jellyfin/jellyfin'
    container_name: jellyfin
    user: 9001:9001
    labels:
      - traefik.enable=true
      - traefik.http.services.jellyfin.loadbalancer.server.port=8096
      - traefik.docker.network=ctr-network
    volumes:
      - './config:/config'
      - '/ctr_data/jellyfin/cache:/cache'
      - '/ctr_data/jellyfin/metadata:/metadata'
      - '/tmp/jftranscode:/transcode'
      - 'videos:/videos'
      - 'music:/music'
    mem_limit: 2048m
    cpus: 2
    networks:
      lan-network:
          ipv4_address: 192.168.0.65
      default:
    restart: 'unless-stopped'
networks:
  default:
    external: true
    name: ctr-network
  lan-network:
    name: lan-network
    external: true
volumes:
  videos:
    external: true
  music:
    external: true