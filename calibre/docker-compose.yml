---
version: "2.4"
services:
  calibre:
    image: 'ghcr.io/linuxserver/calibre-web:0.6.21@sha256:b89ff20a37cf2bf5ca62a77ba7adc35e2182ca4161315f6a1bd0934c438ac0f3'
    container_name: calibre
    labels:
      - traefik.enable=true
      - traefik.http.services.calibre.loadbalancer.server.port=8083
      - show.external=true
    environment:
      - PUID=9001
      - PGID=9001
      - DOCKER_MODS=linuxserver/mods:universal-calibre
    volumes:
      - './config:/config'
      - '/mnt/calibre/books:/books'
    restart: 'unless-stopped'
  calibreserver:
    image: 'ghcr.io/linuxserver/calibre:7.6.0@sha256:ba1080ab456eec57ee62cf2a6f867f133dff3fd93eddd4e42b70e3448f4d4c85'
    container_name: calibreserver
    labels:
      - traefik.enable=true
      - traefik.http.services.calibreserver.loadbalancer.server.port=8080
      - show.external=true
    security_opt:
      - seccomp:unconfined
    environment:
      - PUID=9001
      - PGID=9001
    volumes:
      - './server:/config'
      - '/mnt/calibre/books:/books'
      - '/mnt/calibre/import:/import'
    restart: 'unless-stopped'

networks:
  default:
    external: true
    name: ctr-network
